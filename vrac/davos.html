<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>NoBrainer://DeepOrga – Générateur de devis</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg: #05060c;
      --primary: #00ff9c;
      --accent: #ff3b81;
      --muted: #a3b0c3;
      --text: #f6f7ff;
      --card: #0b0d1c;
      --radius: 18px;
      --mono: "Fira Code", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      --shadow: 0 20px 60px rgba(0,0,0,0.85);
      --transition: 0.16s cubic-bezier(0.22,0.61,0.36,1);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      background:
        radial-gradient(circle at top, rgba(0,255,156,0.18), transparent 55%),
        radial-gradient(circle at bottom, rgba(255,59,129,0.14), transparent 55%),
        #020309;
      color: var(--text);
      font-family: var(--sans);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 18px 10px;
    }

    .wrapper {
      width: 100%;
      max-width: 980px;
      background: radial-gradient(circle at top left, rgba(255,255,255,0.07), transparent 55%),
                  radial-gradient(circle at bottom right, rgba(0,0,0,0.95), rgba(0,0,0,0.98));
      border-radius: 28px;
      border: 1px solid rgba(255,255,255,0.12);
      box-shadow: var(--shadow);
      backdrop-filter: blur(26px) saturate(140%);
      padding: 18px 16px 16px;
      display: grid;
      grid-template-columns: minmax(0, 1.05fr) minmax(0, 1.1fr);
      gap: 14px;
      position: relative;
      overflow: hidden;
    }

    @media (max-width: 900px) {
      .wrapper {
        grid-template-columns: minmax(0,1fr);
        padding: 16px 12px 14px;
        border-radius: 22px;
      }
    }

    header {
      grid-column: 1 / -1;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 6px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      user-select: none;
    }

    .logo {
      width: 40px;
      height: 40px;
      border-radius: 17px;
      background:
        conic-gradient(from 210deg, #00ff9c, #3be4ff, #ff3b81, #00ff9c);
      border: 1px solid rgba(255,255,255,0.4);
      box-shadow: 0 12px 32px rgba(0,0,0,0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--mono);
      font-size: 18px;
      color: #05060c;
      position: relative;
      overflow: hidden;
      transition: transform var(--transition), box-shadow var(--transition);
    }

    .logo::after {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        repeating-linear-gradient(
          45deg,
          rgba(0,0,0,0.3) 0,
          rgba(0,0,0,0.3) 1px,
          transparent 2px,
          transparent 4px
        );
      mix-blend-mode: soft-light;
      opacity: 0.7;
    }

    .brand:hover .logo {
      transform: rotate(-5deg) scale(1.03);
      box-shadow: 0 14px 38px rgba(0,0,0,0.9);
    }

    .brand-text h1 {
      font-size: 1rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }

    .brand-text p {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--muted);
    }

    .pill {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      padding: 5px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.2);
      background: rgba(0,0,0,0.7);
      display: inline-flex;
      align-items: center;
      gap: 7px;
      color: var(--muted);
    }

    .pill-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: var(--primary);
      box-shadow: 0 0 9px rgba(0,255,156,0.9);
    }

    .card {
      background: linear-gradient(135deg, rgba(7,8,24,0.98), rgba(8,8,30,0.99));
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,0.1);
      padding: 12px 12px 11px;
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top, rgba(255,255,255,0.05), transparent 55%);
      mix-blend-mode: soft-light;
      pointer-events: none;
    }

    .card-inner {
      position: relative;
      z-index: 1;
    }

    h2 {
      font-size: 0.98rem;
      margin-bottom: 4px;
    }

    .tagline {
      font-family: var(--mono);
      font-size: 0.78rem;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .tagline .code {
      display: inline-block;
      padding: 1px 5px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(0,0,0,0.7);
      font-size: 0.74rem;
    }

    p, li {
      font-size: 0.84rem;
      color: var(--muted);
      line-height: 1.5;
    }

    ul { padding-left: 16px; margin-top: 4px; }

    .highlight { color: var(--accent); }
    .primary { color: var(--primary); }

    .field-group {
      margin-top: 6px;
    }

    .label {
      font-size: 0.76rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--muted);
      margin-bottom: 3px;
    }

    input, select, textarea {
      width: 100%;
      border-radius: 9px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(0,0,0,0.8);
      color: var(--text);
      padding: 7px 9px;
      font-size: 0.82rem;
      font-family: var(--mono);
      outline: none;
      transition: border-color var(--transition), box-shadow var(--transition), background var(--transition), transform var(--transition);
      resize: vertical;
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--primary);
      background: #000b09;
      box-shadow: 0 0 0 1px rgba(0,255,156,0.45);
      transform: translateY(-0.5px);
    }

    textarea { min-height: 56px; }

    .row-2 {
      display: grid;
      grid-template-columns: minmax(0,1fr) minmax(0,1fr);
      gap: 8px;
    }

    .options-list {
      margin-top: 4px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(0,0,0,0.65);
      padding: 6px 7px;
      max-height: 210px;
      overflow-y: auto;
    }

    .option-item {
      display: grid;
      grid-template-columns: min-content minmax(0,1.6fr) minmax(0,0.9fr);
      align-items: center;
      gap: 6px;
      padding: 4px 3px;
      border-radius: 7px;
      transition: background var(--transition);
      font-size: 0.8rem;
      color: var(--muted);
    }

    .option-item:hover {
      background: rgba(255,255,255,0.04);
    }

    .option-item input[type="checkbox"] {
      width: auto;
      accent-color: var(--primary);
      transform: scale(1.05);
    }

    .option-title {
      font-size: 0.8rem;
      color: var(--text);
    }

    .option-desc {
      font-size: 0.74rem;
      color: var(--muted);
    }

    .option-meta {
      font-size: 0.74rem;
      text-align: right;
      color: var(--muted);
    }

    .chip {
      display: inline-block;
      padding: 1px 5px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      font-size: 0.7rem;
      color: var(--muted);
      margin-left: 4px;
    }

    .btn {
      border-radius: 999px;
      padding: 7px 14px;
      border: none;
      font-size: 0.82rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: 600;
      background: linear-gradient(120deg, #00ff9c, #3be4ff);
      color: #05060c;
      box-shadow: 0 12px 30px rgba(0,0,0,0.85);
      transition: transform var(--transition), box-shadow var(--transition), filter var(--transition);
    }

    .btn:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 16px 36px rgba(0,0,0,0.9);
    }

    .btn:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 9px 20px rgba(0,0,0,0.9);
    }

    .btn-ghost {
      border-radius: 999px;
      padding: 6px 11px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(0,0,0,0.75);
      color: var(--muted);
      font-size: 0.78rem;
      text-transform: none;
      letter-spacing: 0.05em;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: border-color var(--transition), color var(--transition), background var(--transition), transform var(--transition), box-shadow var(--transition);
    }

    .btn-ghost:hover {
      border-color: var(--accent);
      color: var(--text);
      background: rgba(10,10,25,0.95);
      transform: translateY(-1px);
      box-shadow: 0 10px 26px rgba(0,0,0,0.9);
    }

    .btn-row {
      margin-top: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      justify-content: space-between;
    }

    .status {
      font-size: 0.75rem;
      color: var(--muted);
      font-family: var(--mono);
    }

    .status.ok { color: var(--primary); }
    .status.warn { color: #ffd166; }

    .devis-output {
      font-family: var(--mono);
      font-size: 0.8rem;
      white-space: pre-wrap;
      background: rgba(0,0,0,0.85);
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.2);
      padding: 8px 9px;
      max-height: 320px;
      overflow-y: auto;
      margin-top: 6px;
    }

    .summary {
      margin-top: 6px;
      font-size: 0.8rem;
      color: var(--muted);
    }

    .summary strong { color: var(--primary); }

    footer {
      grid-column: 1 / -1;
      margin-top: 6px;
      font-size: 0.74rem;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
    }

    .footer-code {
      font-family: var(--mono);
      font-size: 0.74rem;
    }

    .footer-code .accent { color: var(--accent); }

    .id-pill {
      font-family: var(--mono);
      font-size: 0.74rem;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(0,0,0,0.7);
      color: var(--muted);
    }

    .kbd {
      font-family: var(--mono);
      font-size: 0.75rem;
      padding: 1px 5px;
      border-radius: 5px;
      border: 1px solid rgba(255,255,255,0.3);
      background: rgba(0,0,0,0.7);
    }
  </style>
</head>
<body>
<div class="wrapper">
  <header>
    <div class="brand" id="brand">
      <div class="logo">S?</div>
      <div class="brand-text">
        <h1>NoBrainer://DeepOrga</h1>
        <p>Générateur de devis pour l’organisation</p>
      </div>
    </div>
    <div class="pill" id="pill">
      <span class="pill-dot"></span>
      <span>mode : devis fantôme · off-ledger</span>
    </div>
  </header>

  <!-- COLONNE GAUCHE : FORMULAIRE -->
  <section class="card">
    <div class="card-inner">
      <div class="tagline">
        <span class="code">// remplir le minimum vital, le reste est supposé</span>
      </div>
      <h2>1. Infos de base</h2>
      <p>
        Génère un devis pour une mission DeepOrga : audit d’absurdités, cartographie des couches,
        micro-résistances… ou ce que tu veux facturer à « l’organisation derrière l’organisation ».
      </p>

      <div class="field-group">
        <div class="label">Client / Organisation visible</div>
        <input id="client" placeholder="Nom de l’organisation officielle (ou alias)">
      </div>

      <div class="field-group row-2">
        <div>
          <div class="label">Couche ciblée</div>
          <select id="layer">
            <option value="front-office / vitrine">Front-office / vitrine</option>
            <option value="couches intermédiaires">Couches intermédiaires</option>
            <option value="backoffice stratégique">Backoffice stratégique</option>
            <option value="organisation derrière l’organisation" selected>Organisation derrière l’organisation</option>
          </select>
        </div>
        <div>
          <div class="label">Degré de paranoïa</div>
          <select id="paranoia">
            <option value="1">1 – tout va bien</option>
            <option value="2">2 – ça commence à grincer</option>
            <option value="3" selected>3 – niveau comité fantôme</option>
            <option value="4">4 – full dossier DeepOrga</option>
          </select>
        </div>
      </div>

      <div class="field-group row-2">
        <div>
          <div class="label">Taux journalier (hors taxes)</div>
          <input id="tjm" type="number" min="0" step="50" value="800">
        </div>
        <div>
          <div class="label">TVA</div>
          <select id="tva">
            <option value="0">0 % (asso / off-grid)</option>
            <option value="10">10 %</option>
            <option value="20" selected>20 %</option>
          </select>
        </div>
      </div>

      <div class="field-group">
        <div class="label">Devise</div>
        <select id="currency">
          <option value="€" selected>€ – euro</option>
          <option value="$">$ – dollar</option>
          <option value="CHF">CHF – franc suisse</option>
          <option value="credits">credits – monnaie interne fictive</option>
        </select>
      </div>

      <div class="field-group">
        <div class="label">Notes internes (non visibles du client)</div>
        <textarea id="notes" placeholder="ex : 'ne surtout pas dire que c’est pour cartographier la deep-orga'"></textarea>
      </div>
    </div>
  </section>

  <!-- COLONNE DROITE : LIGNES + DEVIS -->
  <section class="card">
    <div class="card-inner">
      <div class="tagline">
        <span class="code">// lignes de mission</span>
      </div>
      <h2>2. Prestation(s) & calcul</h2>
      <p>
        Coche les missions à inclure dans le devis. Tu peux ensuite générer un texte de devis
        prêt à copier-coller dans un mail, un doc, un pad, etc.
      </p>

      <div class="field-group">
        <div class="label">
          Modules DeepOrga
          <span class="chip">tu peux en cocher plusieurs</span>
        </div>
        <div class="options-list" id="options-list">
          <!-- items générés en JS -->
        </div>
      </div>

      <div class="field-group row-2">
        <div>
          <div class="label">Marge / complexité (%)</div>
          <input id="margin" type="number" min="0" max="200" step="5" value="20">
        </div>
        <div>
          <div class="label">Référence devis</div>
          <input id="ref" placeholder="généré auto si vide">
        </div>
      </div>

      <div class="btn-row">
        <button class="btn" id="btn-generate">
          <span>Générer le devis</span> <span>▶</span>
        </button>
        <button class="btn-ghost" id="btn-copy">
          copier le texte dans le presse-papiers
        </button>
      </div>

      <div class="summary" id="summary">
        Sélectionne au moins une prestation pour voir le détail du montant.
      </div>

      <div class="devis-output" id="devis-output"></div>

      <div class="status" id="status">
        Astuce : tu peux adapter les intitulés de prestations directement dans le code HTML (section OPTIONS_CONFIG).
      </div>
    </div>
  </section>

  <footer>
    <div class="footer-code">
      devis_engine.log(<span class="accent">"toute organisation devrait payer pour ses propres absurdités"</span>);
    </div>
    <div class="id-pill" id="hub-id">
      devis_instance::booting…
    </div>
  </footer>
</div>

<script>
  // ==========================
  // CONFIG des prestations
  // ==========================

  const OPTIONS_CONFIG = [
    {
      id: "audit_absurdite",
      title: "Audit d’absurdités organisationnelles",
      desc: "Recensement qualitatif des situations kafkaïennes, décisions incompréhensibles et procédures auto-contradictoires.",
      days: 2,
      tag: "#lucidite #terrain"
    },
    {
      id: "carto_pouvoir",
      title: "Cartographie des couches de pouvoir",
      desc: "Analyse des organigrammes visibles vs. flux de décisions réels (commissions fantômes, veto silencieux, réseaux informels).",
      days: 3,
      tag: "#deepOrga #pouvoir"
    },
    {
      id: "atelier_personas",
      title: "Atelier 'personas de l’organisation derrière l’organisation'",
      desc: "Co-construction avec l’équipe de portraits fictifs des forces invisibles qui orientent les choix sans jamais apparaître.",
      days: 1,
      tag: "#culture #prise_de_recul"
    },
    {
      id: "proto_rituels",
      title: "Prototype de rituels d’auto-défense mentale",
      desc: "Conception de rituels simples pour repérer les dérives absurdes et les désamorcer collectivement.",
      days: 1.5,
      tag: "#sante_mentale #collectif"
    },
    {
      id: "rapport_deeporga",
      title: "Rapport DeepOrga synthétique",
      desc: "Rédaction d’un rapport anonymisé mettant en lumière 3 à 5 patterns structurels et pistes d’action réalistes.",
      days: 2,
      tag: "#rapport #strategie"
    },
    {
      id: "arg_interne",
      title: "ARG interne 'et si tout ça était un jeu ?'",
      desc: "Conception d’un petit jeu narratif pour introduire ces sujets sans tout casser d’un coup.",
      days: 2.5,
      tag: "#jeu #onboarding"
    }
  ];

  // ==========================
  // INIT UI
  // ==========================

  const optionsListEl = document.getElementById("options-list");

  OPTIONS_CONFIG.forEach(opt => {
    const row = document.createElement("label");
    row.className = "option-item";

    const checkbox = document.createElement("input");
    checkbox.type = "checkbox";
    checkbox.dataset.id = opt.id;

    const main = document.createElement("div");
    const title = document.createElement("div");
    title.className = "option-title";
    title.textContent = opt.title;

    const desc = document.createElement("div");
    desc.className = "option-desc";
    desc.textContent = opt.desc;

    main.appendChild(title);
    main.appendChild(desc);

    const meta = document.createElement("div");
    meta.className = "option-meta";
    meta.innerHTML =
      opt.days + " j · <span class='primary'>" + opt.tag + "</span>";

    row.appendChild(checkbox);
    row.appendChild(main);
    row.appendChild(meta);

    optionsListEl.appendChild(row);
  });

  const brand = document.getElementById("brand");
  const pill = document.getElementById("pill");
  const hubIdEl = document.getElementById("hub-id");
  const statusEl = document.getElementById("status");
  const devisOutputEl = document.getElementById("devis-output");
  const summaryEl = document.getElementById("summary");

  const instanceId = Math.random().toString(16).slice(2, 10);
  hubIdEl.textContent = "devis_instance::" + instanceId;

  let brandClicks = 0;
  brand.addEventListener("click", () => {
    brandClicks++;
    if (brandClicks === 1) {
      pill.lastElementChild.textContent = "mode : toujours en dessous du vrai coût";
    } else if (brandClicks === 3) {
      pill.lastElementChild.textContent = "mode : facturer l’absurde à l’absurde";
    }
  });

  // ==========================
  // LOGIQUE DE CALCUL
  // ==========================

  function getSelectedOptions() {
    const checked = optionsListEl.querySelectorAll("input[type='checkbox']:checked");
    const list = [];
    checked.forEach(input => {
      const id = input.dataset.id;
      const opt = OPTIONS_CONFIG.find(o => o.id === id);
      if (opt) list.push(opt);
    });
    return list;
  }

  function generateRef() {
    const now = new Date();
    const yyyy = now.getFullYear();
    const mm = String(now.getMonth() + 1).padStart(2, "0");
    const dd = String(now.getDate()).padStart(2, "0");
    const rand = Math.random().toString(16).slice(2, 6).toUpperCase();
    return "DO-" + yyyy + mm + dd + "-" + rand;
  }

  function generateDevisText() {
    const client = document.getElementById("client").value.trim() || "Organisation non spécifiée";
    const layer = document.getElementById("layer").value;
    const paranoia = parseInt(document.getElementById("paranoia").value, 10) || 1;
    const tjm = parseFloat(document.getElementById("tjm").value) || 0;
    const tva = parseFloat(document.getElementById("tva").value) || 0;
    const currency = document.getElementById("currency").value;
    const notes = document.getElementById("notes").value.trim();
    const margin = parseFloat(document.getElementById("margin").value) || 0;
    let ref = document.getElementById("ref").value.trim();
    if (!ref) {
      ref = generateRef();
      document.getElementById("ref").value = ref;
    }

    const selected = getSelectedOptions();
    if (!selected.length) {
      summaryEl.innerHTML = "Sélectionne au moins une prestation pour calculer le devis.";
      devisOutputEl.textContent = "";
      statusEl.classList.remove("ok", "warn");
      statusEl.textContent = "Aucun module DeepOrga sélectionné pour l’instant.";
      return;
    }

    // Calcul des jours + majoration paranoïa
    let totalDays = 0;
    selected.forEach(o => totalDays += o.days);
    const paranoiaFactor = 1 + (paranoia - 1) * 0.15; // +15 % par cran de parano
    const marginFactor = 1 + margin / 100;

    const baseHT = totalDays * tjm;
    const adjustedHT = baseHT * paranoiaFactor * marginFactor;
    const tvaAmount = adjustedHT * (tva / 100);
    const totalTTC = adjustedHT + tvaAmount;

    function fmt(x) {
      return (Math.round(x * 100) / 100).toLocaleString("fr-FR", { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    // Texte du devis
    let lines = [];

    lines.push("DEVIS " + ref);
    lines.push("Client : " + client);
    lines.push("Couche ciblée : " + layer);
    lines.push("Degré de paranoïa perçu : " + paranoia + " / 4");
    lines.push("Devise : " + currency);
    lines.push("");
    lines.push("PRESTATIONS PROPOSÉES :");
    selected.forEach(o => {
      lines.push(" - " + o.title + " (" + o.days + " j) – " + o.tag);
    });
    lines.push("");

    lines.push("CALCUL (hors taxes) :");
    lines.push(" - Total jours estimés : " + fmt(totalDays) + " j");
    lines.push(" - Taux journalier : " + fmt(tjm) + " " + currency + " / j");
    lines.push(" - Sous-total (base) : " + fmt(baseHT) + " " + currency);
    lines.push(" - Coefficient paranoïa (" + paranoiaFactor.toFixed(2) + ") : " + fmt(baseHT * paranoiaFactor) + " " + currency);
    lines.push(" - Marge / complexité (" + margin + " %) : " + fmt(adjustedHT) + " " + currency);
    lines.push("");

    lines.push("TVA : " + tva + " %");
    lines.push("Montant TVA : " + fmt(tvaAmount) + " " + currency);
    lines.push("TOTAL TTC : " + fmt(totalTTC) + " " + currency);
    lines.push("");

    lines.push("Conditions informelles :");
    lines.push(" - Ce devis vise les structures, pas les personnes.");
    lines.push(" - Toute ressemblance avec des comités réels est parfaitement intentionnelle.");
    lines.push(" - La mission inclut une dose raisonnable de lucidité et d’humour noir.");
    if (notes) {
      lines.push("");
      lines.push("Notes internes (à garder pour toi) :");
      lines.push(notes);
    }

    // Résumé visuel
    summaryEl.innerHTML =
      "Total estimé : <strong>" + fmt(totalTTC) + " " + currency +
      "</strong> (" + fmt(adjustedHT) + " HT, TVA " + tva + " %). " +
      "Jours prévus : <strong>" + fmt(totalDays) + "</strong> · niveau d’infiltration : <strong>" +
      paranoia + "/4</strong>.";

    devisOutputEl.textContent = lines.join("\n");

    statusEl.classList.remove("warn");
    statusEl.classList.add("ok");
    statusEl.textContent = "Devis généré. Tu peux l’ajuster à la main avant envoi (l’absurde ne se met pas totalement en cases).";
  }

  document.getElementById("btn-generate").addEventListener("click", generateDevisText);

  // Générer aussi si on change vite un param important
  document.getElementById("tjm").addEventListener("change", generateDevisText);
  document.getElementById("tva").addEventListener("change", generateDevisText);
  document.getElementById("margin").addEventListener("change", generateDevisText);

  // Copier le texte
  document.getElementById("btn-copy").addEventListener("click", () => {
    const txt = devisOutputEl.textContent.trim();
    if (!txt) {
      statusEl.textContent = "Rien à copier : génère d’abord un devis.";
      statusEl.classList.remove("ok");
      statusEl.classList.add("warn");
      return;
    }
    navigator.clipboard.writeText(txt).then(() => {
      statusEl.textContent = "Texte du devis copié dans le presse-papiers. Colle-le où tu veux (mail, doc, pad, zine…).";
      statusEl.classList.remove("warn");
      statusEl.classList.add("ok");
    }).catch(() => {
      statusEl.textContent = "Impossible d’accéder au presse-papiers. Sélectionne et copie le texte à la main.";
      statusEl.classList.remove("ok");
      statusEl.classList.add("warn");
    });
  });

  // Recalcul automatique quand on coche / décoche
  optionsListEl.addEventListener("change", generateDevisText);
</script>
</body>
</html>
