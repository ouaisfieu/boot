<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Focus test ‚Äì Pression sociale sur ch√¥meurs et malades de longue dur√©e</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #020617;
      --bg-card: #020617;
      --accent: #22c55e;
      --accent2: #0ea5e9;
      --danger: #f97316;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --radius: 18px;
      --shadow: 0 22px 45px rgba(15, 23, 42, 0.9);
      --toxic: #facc15;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at 0 0, #0ea5e9 0, transparent 55%),
        radial-gradient(circle at 100% 100%, #22c55e 0, transparent 55%),
        #020617;
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Bandeau d‚Äôalerte */
    .alert-marquee {
      background: repeating-linear-gradient(
        45deg,
        #22c55e,
        #22c55e 10px,
        #0ea5e9 10px,
        #0ea5e9 20px
      );
      color: #0f172a;
      padding: 6px 0;
      overflow: hidden;
      position: sticky;
      top: 0;
      z-index: 1000;
      cursor: pointer;
      border-bottom: 2px solid #0f172a;
    }

    .alert-marquee-inner {
      display: inline-block;
      white-space: nowrap;
      animation: marquee 18s linear infinite;
      font-weight: 700;
      font-size: 0.85rem;
    }

    .alert-marquee-inner span {
      margin: 0 40px;
    }

    @keyframes marquee {
      from { transform: translateX(0); }
      to { transform: translateX(-50%); }
    }

    /* Layout principal : une seule carte (focus) */
    .page {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: stretch;
      padding: 16px;
    }

    .card {
      background: radial-gradient(circle at 0 0, rgba(34, 197, 94, 0.1), transparent 60%),
                  radial-gradient(circle at 100% 100%, rgba(56, 189, 248, 0.15), transparent 60%),
                  var(--bg-card);
      border-radius: var(--radius);
      border: 1px solid rgba(148, 163, 184, 0.3);
      box-shadow: var(--shadow);
      padding: 14px 14px 16px;
      position: relative;
      overflow: hidden;
      width: 100%;
      max-width: 960px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    h1 {
      font-size: 1.4rem;
      margin-bottom: 4px;
    }

    .subtitle {
      font-size: 0.85rem;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .top-row {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      align-items: flex-start;
    }

    .toxic-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px dashed var(--toxic);
      font-size: 0.75rem;
      color: var(--toxic);
      background: rgba(15, 23, 42, 0.9);
      margin-bottom: 6px;
    }

    .distraction-toggle {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.95);
      color: var(--text);
      font-size: 0.8rem;
      padding: 6px 10px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      transition: background 0.15s, transform 0.15s, box-shadow 0.15s;
      white-space: nowrap;
    }

    .distraction-toggle:hover {
      background: rgba(15, 23, 42, 1);
      box-shadow: 0 10px 22px rgba(15, 23, 42, 0.9);
      transform: translateY(-1px);
    }

    .pingouin-floating {
      position: absolute;
      width: 60px;
      opacity: 0.15;
      pointer-events: none;
      filter: drop-shadow(0 0 12px rgba(15, 23, 42, 0.9));
    }
    .pingouin-floating.p1 {
      top: -12px; right: -10px;
      transform: rotate(-18deg);
    }
    .pingouin-floating.p2 {
      bottom: -16px; left: -10px;
      transform: rotate(16deg);
    }

    /* Quiz */
    .quiz-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
      font-size: 0.8rem;
      color: var(--muted);
      flex-wrap: wrap;
    }

    .quiz-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
    }

    .chip {
      padding: 3px 9px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(148, 163, 184, 0.4);
      font-size: 0.75rem;
    }

    .progress-bar-outer {
      flex: 1;
      min-width: 120px;
      height: 7px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.95);
      overflow: hidden;
      border: 1px solid rgba(148, 163, 184, 0.4);
    }

    .progress-bar-inner {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--accent2), var(--accent));
      transition: width 0.22s ease-out;
    }

    .toxic-meter {
      font-size: 0.75rem;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 6px;
    }

    .toxic-meter-bar {
      flex: 1;
      height: 5px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.95);
      overflow: hidden;
      border: 1px solid rgba(148, 163, 184, 0.4);
      position: relative;
    }

    .toxic-meter-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #f97316, #facc15);
      transition: width 0.2s ease-out;
    }

    .question-title {
      font-size: 1rem;
      margin-bottom: 3px;
    }

    .question-text {
      font-size: 0.9rem;
      margin-bottom: 8px;
    }

    .answers {
      display: flex;
      flex-direction: column;
      gap: 7px;
      margin-bottom: 8px;
    }

    .answer {
      display: flex;
      gap: 8px;
      align-items: flex-start;
      padding: 7px 9px;
      border-radius: 11px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.92);
      cursor: pointer;
      font-size: 0.87rem;
      transition: transform 0.15s ease-out,
                  background 0.15s ease-out,
                  border-color 0.15s ease-out,
                  box-shadow 0.15s ease-out;
      position: relative;
    }

    .answer:hover {
      transform: translateY(-1px);
      background: rgba(15, 23, 42, 1);
      box-shadow: 0 10px 22px rgba(15, 23, 42, 0.8);
    }

    .answer-label {
      font-weight: 600;
      font-size: 0.78rem;
      color: var(--accent2);
      min-width: 18px;
    }

    .answer.selected {
      border-color: var(--accent2);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
    }

    .answer.correct {
      border-color: var(--accent);
      background: rgba(34, 197, 94, 0.18);
    }

    .answer.wrong {
      border-color: var(--danger);
      background: rgba(248, 113, 113, 0.12);
    }

    .answer .toxic-score {
      position: absolute;
      right: 6px;
      bottom: 4px;
      font-size: 0.65rem;
      color: var(--muted);
      opacity: 0.7;
    }

    .feedback {
      font-size: 0.8rem;
      border-radius: 10px;
      padding: 6px 8px;
      border-left: 3px solid var(--accent2);
      background: rgba(15, 23, 42, 0.9);
      color: var(--muted);
      margin-bottom: 6px;
      display: none;
    }

    .feedback.visible {
      display: block;
    }

    .feedback.wrong {
      border-left-color: var(--danger);
    }

    .feedback strong {
      color: var(--text);
    }

    .quiz-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: flex-end;
      margin-top: 2px;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 7px 13px;
      font-size: 0.85rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      font-weight: 600;
      transition: transform 0.16s ease-out,
                  box-shadow 0.16s ease-out,
                  background 0.16s ease-out,
                  color 0.16s ease-out;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent2), var(--accent));
      color: #0f172a;
      box-shadow: 0 10px 22px rgba(8, 47, 73, 0.7);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 30px rgba(8, 47, 73, 1);
    }

    .btn-ghost {
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.5);
      color: var(--text);
    }

    .btn-ghost:hover {
      background: rgba(15, 23, 42, 1);
    }

    .btn[disabled] {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    /* R√©sultats */
    .result-screen {
      display: none;
      margin-top: 6px;
      border-top: 1px dashed rgba(148, 163, 184, 0.4);
      padding-top: 6px;
      font-size: 0.88rem;
    }

    .result-title {
      font-weight: 600;
      margin-bottom: 3px;
    }

    .result-score {
      font-size: 1.1rem;
      margin-bottom: 4px;
    }

    .result-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 0.75rem;
      color: var(--muted);
    }

    .egg {
      font-size: 0.7rem;
      color: var(--muted);
      opacity: 0.6;
      margin-top: 4px;
      user-select: none;
      cursor: default;
    }

    /* Panneau de distractions (menu lat√©ral) */
    .distraction-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.75);
      display: none;
      justify-content: flex-end;
      z-index: 999;
    }

    .distraction-backdrop.open {
      display: flex;
    }

    .distraction-panel {
      width: min(420px, 96vw);
      background: #020617;
      border-left: 1px solid rgba(148, 163, 184, 0.5);
      box-shadow: -18px 0 45px rgba(0, 0, 0, 0.85);
      padding: 10px 10px 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .distraction-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .distraction-header h2 {
      font-size: 1rem;
    }

    .distraction-close {
      border: none;
      background: transparent;
      color: var(--muted);
      cursor: pointer;
      font-size: 1.1rem;
    }

    .sidebar-tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 0.75rem;
    }

    .sidebar-tab {
      padding: 4px 9px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.5);
      cursor: pointer;
      color: var(--muted);
      transition: background 0.15s, color 0.15s, border-color 0.15s;
    }

    .sidebar-tab.active {
      background: rgba(34, 197, 94, 0.13);
      color: var(--accent);
      border-color: var(--accent);
    }

    .sidebar-pane {
      display: none;
      font-size: 0.78rem;
      color: var(--muted);
      max-height: 420px;
      overflow: auto;
      padding-right: 4px;
    }

    .sidebar-pane.active {
      display: block;
    }

    .penguin-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px;
      margin-top: 6px;
    }

    .penguin-grid img {
      width: 100%;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      cursor: pointer;
      transition: transform 0.15s, box-shadow 0.15s;
    }

    .penguin-grid img:hover {
      transform: translateY(-2px) scale(1.01);
      box-shadow: 0 10px 22px rgba(15, 23, 42, 0.85);
    }

    iframe, embed {
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      width: 100%;
      margin-top: 6px;
      background: #020617;
    }

    .hint {
      margin-top: 6px;
      font-size: 0.75rem;
      color: var(--muted);
    }

    /* Interstitiel YouTube */
    .interstitial-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.94);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .interstitial-content {
      width: min(640px, 94vw);
      background: #020617;
      border-radius: 16px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      box-shadow: 0 26px 60px rgba(0, 0, 0, 0.9);
      padding: 10px;
      position: relative;
    }

    .interstitial-content h2 {
      font-size: 1rem;
      margin-bottom: 4px;
    }

    .interstitial-text {
      font-size: 0.8rem;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .interstitial-close {
      position: absolute;
      top: 6px;
      right: 8px;
      background: transparent;
      border: none;
      color: var(--muted);
      cursor: pointer;
      font-size: 1.1rem;
    }

    footer {
      padding: 6px 12px 10px;
      font-size: 0.75rem;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
      gap: 8px;
      border-top: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(15, 23, 42, 0.96);
    }

    @media (max-width: 700px) {
      footer {
        flex-direction: column;
      }
      .top-row {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>

<!-- Bandeau : info + mini-troll -->
<div class="alert-marquee" id="alertMarquee">
  <div class="alert-marquee-inner">
    <span>üéì Mode focus : le test porte sur la pression sociale en Belgique (ch√¥meurs & malades de longue dur√©e).</span>
    <span>üêß Les distractions sont rang√©es dans un menu. Tu peux les ouvrir‚Ä¶ √† tes risques et p√©rils.</span>
    <span>üéÆ Easter egg : ‚Üë ‚Üë ‚Üì ‚Üì ‚Üê ‚Üí ‚Üê ‚Üí B A active le mode ‚Äú√©chec garanti‚Äù.</span>
  </div>
</div>

<div class="page">
  <section class="card">
    <img class="pingouin-floating p1" src="https://upload.wikimedia.org/wikipedia/commons/3/3c/Emperor_Penguin_chicks.jpg" alt="Pingouins" />
    <img class="pingouin-floating p2" src="https://upload.wikimedia.org/wikipedia/commons/0/0b/Penguins_walking_-Moltke_Harbour%2C_South_Georgia%2C_British_overseas_territory%2C_UK-8.jpg" alt="Pingouins" />

    <div class="top-row">
      <div>
        <h1>Test examen ‚Äì Pression sociale sur ch√¥meurs & malades de longue dur√©e</h1>
        <p class="subtitle">
          Questions bas√©es sur la synth√®se des discours politiques, des r√©formes (Arizona) et du r√¥le
          ONEM / mutualit√©s / CPAS. Id√©al pour r√©viser sans (trop) se faire pi√©ger.
        </p>
        <div class="toxic-badge">
          ‚ò†Ô∏è Gamification toxique (optionnelle)
          <span id="streakLabel">(s√©rie parfaite : 0)</span>
        </div>
      </div>
      <button class="distraction-toggle" id="openDistractions">
        üå™ Ouvrir le menu de distractions
      </button>
    </div>

    <div class="quiz-header">
      <div class="quiz-meta">
        <span class="chip" id="questionCounter">Question 1 / 8</span>
        <span class="chip" id="scoreChip">Score : 0</span>
        <span class="chip" id="xpChip">XP illusion : 0</span>
      </div>
      <div class="progress-bar-outer">
        <div class="progress-bar-inner" id="progressBar"></div>
      </div>
    </div>

    <div class="toxic-meter">
      <span>Toxicit√© du syst√®me :</span>
      <div class="toxic-meter-bar">
        <div class="toxic-meter-fill" id="toxicFill"></div>
      </div>
      <span id="toxicLabel">0%</span>
    </div>

    <div id="quizArea">
      <h2 class="question-title" id="questionTitle">Question</h2>
      <p class="question-text" id="questionText">Texte de la question.</p>
      <div class="answers" id="answersContainer"></div>
      <div class="feedback" id="feedback"></div>

      <div class="quiz-actions">
        <button class="btn btn-ghost" id="prevBtn">‚¨Ö Pr√©c√©dent</button>
        <button class="btn btn-primary" id="validateBtn" disabled>Valider</button>
        <button class="btn btn-ghost" id="nextBtn" style="display:none;">Suivant ‚ûú</button>
      </div>
    </div>

    <div class="result-screen" id="resultScreen">
      <div class="result-title">R√©sultats (mati√®re d‚Äôexamen)</div>
      <div class="result-score" id="finalScoreText"></div>
      <div class="result-tags">
        <span id="commentBadge"></span>
        <span id="detailBadge"></span>
      </div>
      <p style="margin-top:6px;">
        Tu peux recommencer le test, avec ou sans distractions ouvertes. √Ä toi de voir si tu veux
        simuler les conditions de la vraie vie (notifications, flux, etc.).
      </p>
      <button class="btn btn-primary" id="restartBtn" style="margin-top:6px;">
        üîÅ Recommencer
      </button>
      <p class="egg">
        Psst‚Ä¶ Konami code pour activer le mode ‚Äú√©chec garanti‚Äù. Pingouins et interstitiels
        deviendront‚Ä¶ envahissants.
      </p>
    </div>
  </section>
</div>

<!-- Panneau de distractions avec toutes les fonctionnalit√©s -->
<div class="distraction-backdrop" id="distractionBackdrop">
  <div class="distraction-panel">
    <div class="distraction-header">
      <div>
        <h2>Zone de distractions massives</h2>
        <p style="font-size:0.75rem; color:var(--muted);">
          √Ä ouvrir seulement si tu veux rendre le test plus difficile.
          Score de distraction : <span id="distractionScore">0</span>
        </p>
      </div>
      <button class="distraction-close" id="closeDistractions">‚úï</button>
    </div>

    <div class="sidebar-tabs">
      <button class="sidebar-tab active" data-pane="penguinsPane">üêß Pingouins</button>
      <button class="sidebar-tab" data-pane="xPane">ùïè</button>
      <button class="sidebar-tab" data-pane="spotifyPane">üéß Spotify</button>
      <button class="sidebar-tab" data-pane="pdfPane">üìÑ PDF</button>
      <button class="sidebar-tab" data-pane="blueskyPane">‚òÅ Bluesky</button>
      <button class="sidebar-tab" data-pane="youtubePane">‚ñ∂ YouTube+</button>
    </div>

    <!-- Pane pingouins -->
    <div class="sidebar-pane active" id="penguinsPane">
      <p>
        Pingouins d‚ÄôAntarctique pour r√©fl√©chir sur la pression sociale depuis un environnement
        tr√®s‚Ä¶ √©loign√© du CPAS.
      </p>
      <div class="penguin-grid" id="penguinGrid">
        <img src="https://upload.wikimedia.org/wikipedia/commons/0/08/Pygoscelis_adeliae_(cropped).jpg" alt="Pingouin 1" />
        <img src="https://upload.wikimedia.org/wikipedia/commons/f/f8/Adelie_Penguins_in_the_Ross_Sea.jpg" alt="Pingouin 2" />
        <img src="https://upload.wikimedia.org/wikipedia/commons/9/9b/Aptenodytes_forsteri_-Snow_Hill_Island%2C_Antarctica_-adults_and_juveniles-8.jpg" alt="Pingouin 3" />
        <img src="https://upload.wikimedia.org/wikipedia/commons/4/43/Antarctic_adelie_penguins_(js)_4.jpg" alt="Pingouin 4" />
      </div>
      <p class="hint">
        Ces images viennent de Wikimedia / Creative Commons : parfait exemple de biens communs
        num√©riques, tout comme le savoir utilis√© pour ton examen.
      </p>
    </div>

    <!-- Pane X -->
    <div class="sidebar-pane" id="xPane">
      <p>
        Fil social simul√© sur l‚Äôactualit√© sociale : de quoi perdre le fil en plein milieu d‚Äôune
        question sur les sanctions.
      </p>
      <iframe
        title="Embed X"
        height="180"
        src="https://twitter.com/rtbfinfo"
      ></iframe>
      <p class="hint">
        Pour un embed X ‚Äúofficiel‚Äù, il faudrait en plus le script fourni par la plateforme. Ici
        un simple <code>&lt;iframe&gt;</code> suffit √† distraire.
      </p>
    </div>

    <!-- Pane Spotify -->
    <div class="sidebar-pane" id="spotifyPane">
      <p>
        Playlist de fond pendant que tu r√©fl√©chis √† l‚Äôactivation des ch√¥meurs. Connexion
        internet requise.
      </p>
      <iframe
        title="Embed Spotify"
        src="https://open.spotify.com/embed/playlist/37i9dQZF1DWU0ScTcjJBdj"
        height="200"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
      ></iframe>
      <p class="hint">
        Astuce anti-concentration : change de playlist √† chaque nouvelle question.
      </p>
    </div>

    <!-- Pane PDF : mati√®re d‚Äôexamen -->
    <div class="sidebar-pane" id="pdfPane">
      <p>
        Support principal du cours : pression sociale sur les ch√¥meurs et malades de longue
        dur√©e en Belgique. Tu peux l‚Äôouvrir en grand si tu veux relire un passage pr√©cis.
      </p>
      <embed
        src="pression (1).pdf"
        type="application/pdf"
        height="220"
      />
      <p class="hint">
        Place le fichier <code>pression (1).pdf</code> dans le m√™me dossier que
        <code>index.html</code>. Ou renomme-le et adapte l‚Äôattribut <code>src</code>.
      </p>
    </div>

    <!-- Pane Bluesky -->
    <div class="sidebar-pane" id="blueskyPane">
      <p>
        Un autre flux social possible pour lire des d√©bats sur la s√©curit√© sociale et les r√©formes
        du ch√¥mage‚Ä¶ ou juste scroller.
      </p>
      <iframe
        title="Embed Bluesky"
        src="https://bsky.app/"
        height="220"
      ></iframe>
      <p class="hint">
        Tu peux remplacer cette URL par un post pr√©cis qui parle de ch√¥mage, CPAS, sanctions,
        etc.
      </p>
    </div>

    <!-- Pane YouTube+ -->
    <div class="sidebar-pane" id="youtubePane">
      <p>
        Vid√©os de contexte socio-√©conomique. Les interstitiels al√©atoires utiliseront aussi ce
        type de contenus pour casser ton flow.
      </p>
      <iframe
        title="Vid√©o sur l‚Äô√âtat social"
        height="190"
        src="https://www.youtube.com/embed/Tyd0FO0tko8"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen
      ></iframe>
      <p class="hint">
        Rappelle-toi que pendant l‚Äôexamen, YouTube ne sortira pas de l‚Äô√©cran. Profite-en
        pour t‚Äôhabituer √† lui dire non.
      </p>
    </div>
  </div>
</div>

<!-- Interstitiel YouTube -->
<div class="interstitial-overlay" id="interstitial">
  <div class="interstitial-content">
    <button class="interstitial-close" id="closeInterstitial">‚úï</button>
    <h2>Pause forc√©e : interstitiel vid√©o üé¨</h2>
    <p class="interstitial-text" id="interstitialReason">
      Raison : tu sembles trop concentr√©¬∑e, on corrige √ßa.
    </p>
    <iframe
      id="interstitialVideo"
      title="Vid√©o d'interruption"
      height="320"
      src=""
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen
    ></iframe>
    <p class="hint">
      Tu peux fermer cette fen√™tre pour revenir au test. Ou rester l√† et oublier la question en
      cours, ce qui illustre bien la vie num√©rique moderne.
    </p>
  </div>
</div>

<footer>
  <span>
    Page autonome : enregistre ce code comme <strong>index.html</strong> et mets-le dans le m√™me dossier
    que <code>pression (1).pdf</code>. Ouvre-le depuis ta cl√© USB. Les embeds n√©cessitent internet.
  </span>
  <span>
    Tu peux adapter les questions en modifiant le tableau <code>questions</code> dans le script (contenu,
    bonnes r√©ponses, explications).
  </span>
</footer>

<script>
  // --- Quiz "pression sociale sur ch√¥meurs & malades de longue dur√©e" ---
  const questions = [
    {
      title: "Narrations m√©diatiques",
      text: "Selon la synth√®se, quels sont les deux grands types de narrations m√©diatiques sur les ch√¥meurs et malades de longue dur√©e ?",
      answers: [
        "L‚Äôune qui insiste sur le co√ªt budg√©taire, l‚Äôautre sur la concurrence avec les travailleurs √©trangers.",
        "L‚Äôune qui met en avant la souffrance et le d√©sir de travailler, l‚Äôautre qui insiste sur les abus pr√©sum√©s et la n√©cessit√© de sanctions.",
        "L‚Äôune centr√©e sur la culture du m√©rite, l‚Äôautre sur la spiritualit√© et le d√©veloppement personnel.",
        "L‚Äôune qui parle exclusivement de ch√¥mage, l‚Äôautre exclusivement de pensions."
      ],
      correctIndex: 1,
      explanation:
        "Le texte souligne l‚Äôopposition entre des reportages montrant frustration, souffrance et envie de travailler, et des discours politiques/m√©diatiques qui mettent l‚Äôaccent sur les ¬´ abus ¬ª et la responsabilisation/sanction."
    },
    {
      title: "Enqu√™te Solidaris",
      text: "Que met en √©vidence l‚Äôenqu√™te de Solidaris cit√©e dans le document ?",
      answers: [
        "Que la majorit√© des personnes interrog√©es ne souhaitent plus jamais travailler.",
        "Qu‚Äôenviron 70 % des ch√¥meurs ou incapables de travail se disent frustr√©s de ne pas travailler et 80 % souhaitent r√©organiser le travail pour pr√©server la sant√©.",
        "Que seuls les employeurs souhaitent une r√©organisation du travail.",
        "Que la priorit√© des r√©pondants est la baisse des allocations pour encourager la reprise d‚Äôemploi."
      ],
      correctIndex: 1,
      explanation:
        "L‚Äôenqu√™te souligne que la plupart des personnes concern√©es veulent travailler, mais dans des conditions adapt√©es et avec une meilleure organisation du travail (sant√©, √©quilibre vie priv√©e/professionnelle)."
    },
    {
      title: "Responsabilisation et ¬´ abus ¬ª",
      text: "Quels acteurs politiques cit√©s insistent le plus sur la lutte contre les ¬´ abus ¬ª et la responsabilisation des ch√¥meurs/malades ?",
      answers: [
        "Surtout le PTB et les syndicats.",
        "Principalement les partis de centre-droit/droite comme MR, N-VA, Open Vld, CD&V.",
        "Uniquement les partis √©cologistes.",
        "Uniquement des ind√©pendants sans √©tiquette."
      ],
      correctIndex: 1,
      explanation:
        "La synth√®se souligne que des responsables du MR, de la N-VA, de l‚ÄôOpen Vld ou du CD&V mettent l‚Äôaccent sur la responsabilisation et la lutte contre les abus, parfois avec un discours sur la ¬´ fin de l‚Äôassistanat ¬ª."
    },
    {
      title: "Critiques de gauche",
      text: "Comment les partis de gauche radicale et les syndicats qualifient-ils globalement ces politiques de contr√¥le et de sanctions ?",
      answers: [
        "Comme une modernisation n√©cessaire de la s√©curit√© sociale.",
        "Comme une opportunit√© d‚Äôaugmenter les budgets de la sant√©.",
        "Comme une ¬´ chasse aux ch√¥meurs et aux malades ¬ª, faisant d‚Äôeux des boucs √©missaires et fragilisant le mod√®le de s√©curit√© sociale.",
        "Comme une mesure neutre, sans effet social notable."
      ],
      correctIndex: 2,
      explanation:
        "Raoul Hedebouw et d‚Äôautres acteurs de gauche d√©noncent une ¬´ chasse aux ch√¥meurs et aux malades ¬ª et accusent le gouvernement de s‚Äôattaquer au mod√®le de s√©curit√© sociale en stigmatisant les plus fragiles."
    },
    {
      title: "R√©forme du ch√¥mage (Arizona)",
      text: "Quelle mesure cl√© de la r√©forme du ch√¥mage port√©e par le gouvernement Arizona est mentionn√©e ?",
      answers: [
        "L‚Äôaugmentation illimit√©e des allocations pour les ch√¥meurs longue dur√©e.",
        "La limitation de la dur√©e d‚Äôindemnisation du ch√¥mage √† 2 ans, avec exclusion progressive d‚Äôenviron 180 000 ch√¥meurs longue dur√©e.",
        "La suppression pure et simple de l‚ÄôONEM.",
        "La fusion des CPAS avec les mutualit√©s."
      ],
      correctIndex: 1,
      explanation:
        "La r√©forme pr√©voit de limiter √† 2 ans la dur√©e d‚Äôindemnisation pour de nombreux ch√¥meurs, avec environ 180 000 personnes concern√©es et un basculement d‚Äôune partie d‚Äôentre elles vers les CPAS."
    },
    {
      title: "R√¥le des CPAS",
      text: "Quel enjeu majeur les CPAS devront-ils affronter suite √† la r√©forme du ch√¥mage ?",
      answers: [
        "Une forte baisse du nombre de dossiers de RIS.",
        "Un afflux de b√©n√©ficiaires venant de l‚Äôexclusion du ch√¥mage, avec des conditions d‚Äôacc√®s strictes et un manque de personnel.",
        "La gestion directe des allocations de maladie √† la place des mutualit√©s.",
        "L‚Äôobligation de financer seuls les sanctions contre les employeurs."
      ],
      correctIndex: 1,
      explanation:
        "Les CPAS doivent se pr√©parer √† accueillir des milliers de personnes exclues du ch√¥mage, dans un cadre de RIS tr√®s contr√¥l√© et avec des √©quipes d√©j√† sous tension, ce qui alimente les inqui√©tudes sociales."
    },
    {
      title: "Malades de longue dur√©e",
      text: "Quelle √©volution des sanctions est mise en avant pour les malades de longue dur√©e qui ne coop√®rent pas aux mesures de r√©int√©gration ?",
      answers: [
        "Les sanctions sont supprim√©es au profit d‚Äôun accompagnement purement volontaire.",
        "Le rabais sur l‚Äôallocation passe de 2,5 % √† 10 % en cas de non-coop√©ration (questionnaires, rendez-vous, etc.).",
        "Les sanctions passent de 10 % √† 2,5 % pour encourager le dialogue.",
        "Seuls les employeurs sont d√©sormais sanctionn√©s, jamais les malades."
      ],
      correctIndex: 1,
      explanation:
        "Le pacte de majorit√© pr√©voit d‚Äôaugmenter fortement les sanctions financi√®res pour les malades de longue dur√©e jug√©s ¬´ non-coop√©ratifs ¬ª, ce qui participe √† la pression ressentie."
    },
    {
      title: "Responsabilisation des employeurs et mutualit√©s",
      text: "Comment la r√©forme renforce-t-elle la responsabilisation des employeurs et des mutualit√©s vis-√†-vis des malades de longue dur√©e ?",
      answers: [
        "En supprimant totalement leur r√¥le dans le retour au travail.",
        "En demandant aux CPAS de payer les indemnit√©s de maladie √† leur place.",
        "En faisant contribuer certains employeurs √† hauteur d‚Äôenviron 30 % de l‚Äôindemnit√© d√®s le 2·µâ mois et en liant davantage le financement des mutualit√©s √† leurs performances de r√©int√©gration.",
        "En interdisant aux mutualit√©s de suivre les malades apr√®s 6 mois."
      ],
      correctIndex: 2,
      explanation:
        "Les entreprises de plus de 50 travailleurs doivent participer financi√®rement aux indemnit√©s, et une part croissante du financement des mutualit√©s d√©pend de leurs r√©sultats en mati√®re de retour au travail."
    }
  ];

  // --- R√©f√©rences DOM ---
  const questionCounter = document.getElementById("questionCounter");
  const scoreChip = document.getElementById("scoreChip");
  const xpChip = document.getElementById("xpChip");
  const progressBar = document.getElementById("progressBar");

  const questionTitle = document.getElementById("questionTitle");
  const questionText = document.getElementById("questionText");
  const answersContainer = document.getElementById("answersContainer");
  const feedbackEl = document.getElementById("feedback");

  const prevBtn = document.getElementById("prevBtn");
  const validateBtn = document.getElementById("validateBtn");
  const nextBtn = document.getElementById("nextBtn");
  const resultScreen = document.getElementById("resultScreen");
  const finalScoreText = document.getElementById("finalScoreText");
  const commentBadge = document.getElementById("commentBadge");
  const detailBadge = document.getElementById("detailBadge");
  const restartBtn = document.getElementById("restartBtn");

  const toxicFill = document.getElementById("toxicFill");
  const toxicLabel = document.getElementById("toxicLabel");
  const streakLabel = document.getElementById("streakLabel");
  const distractionScoreEl = document.getElementById("distractionScore");
  const alertMarquee = document.getElementById("alertMarquee");

  // Interstitiel
  const interstitial = document.getElementById("interstitial");
  const interstitialReason = document.getElementById("interstitialReason");
  const interstitialVideo = document.getElementById("interstitialVideo");
  const closeInterstitial = document.getElementById("closeInterstitial");

  // Distractions (menu)
  const backdrop = document.getElementById("distractionBackdrop");
  const openDistractionsBtn = document.getElementById("openDistractions");
  const closeDistractionsBtn = document.getElementById("closeDistractions");

  const tabs = document.querySelectorAll(".sidebar-tab");
  const panes = document.querySelectorAll(".sidebar-pane");
  const penguinGrid = document.getElementById("penguinGrid");
  const floatingPenguins = document.querySelectorAll(".pingouin-floating");

  // --- √âtat ---
  let currentIndex = 0;
  let score = 0;
  let xp = 0;
  let toxic = 0; // 0‚Äì100
  let streak = 0;
  let distractionScore = 0;
  let userAnswers = new Array(questions.length).fill(null);
  let correctionsShown = new Array(questions.length).fill(false);
  let penguinClickCombo = 0;
  let konamiBuffer = [];
  const konamiCode = [
    "ArrowUp", "ArrowUp",
    "ArrowDown", "ArrowDown",
    "ArrowLeft", "ArrowRight",
    "ArrowLeft", "ArrowRight",
    "KeyB", "KeyA"
  ];
  let failureMode = false;

  // --- Fonctions utilitaires ---
  function updateHeaders() {
    questionCounter.textContent =
      "Question " + (currentIndex + 1) + " / " + questions.length;
    scoreChip.textContent = "Score : " + score;
    xpChip.textContent = "XP illusion : " + xp;

    const progressPercent = ((currentIndex) / questions.length) * 100;
    progressBar.style.width = progressPercent + "%";

    toxicFill.style.width = toxic + "%";
    toxicLabel.textContent = toxic + "%";
    streakLabel.textContent = "(s√©rie parfaite : " + streak + ")";
    distractionScoreEl.textContent = distractionScore;
  }

  function renderQuestion() {
    const q = questions[currentIndex];
    questionTitle.textContent = q.title;
    questionText.textContent = q.text;
    feedbackEl.className = "feedback";
    feedbackEl.textContent = "";
    feedbackEl.classList.remove("visible");

    answersContainer.innerHTML = "";
    q.answers.forEach((text, index) => {
      const btn = document.createElement("button");
      btn.type = "button";
      btn.className = "answer";
      btn.dataset.index = index;

      const label = document.createElement("div");
      label.className = "answer-label";
      label.textContent = String.fromCharCode(65 + index) + ".";

      const textDiv = document.createElement("div");
      textDiv.textContent = text;

      const toxicScore = document.createElement("div");
      toxicScore.className = "toxic-score";
      toxicScore.textContent = "+1 distraction mentale";

      btn.appendChild(label);
      btn.appendChild(textDiv);
      btn.appendChild(toxicScore);

      btn.addEventListener("click", () => selectAnswer(index));
      answersContainer.appendChild(btn);
    });

    const prevAnswer = userAnswers[currentIndex];
    if (prevAnswer !== null) {
      answersContainer
        .querySelectorAll(".answer")[prevAnswer]
        .classList.add("selected");
      validateBtn.disabled = false;

      if (correctionsShown[currentIndex]) {
        showCorrection(prevAnswer, false); // juste marquage visuel
      }
    } else {
      validateBtn.disabled = true;
    }

    prevBtn.disabled = currentIndex === 0;
    nextBtn.style.display =
      currentIndex === questions.length - 1 ? "none" : "inline-flex";

    updateHeaders();
  }

  function selectAnswer(index) {
    const buttons = answersContainer.querySelectorAll(".answer");
    buttons.forEach((btn) => btn.classList.remove("selected"));
    buttons[index].classList.add("selected");
    userAnswers[currentIndex] = index;
    validateBtn.disabled = false;

    toxic = Math.min(100, toxic + 1);
    updateHeaders();

    if (Math.random() < 0.05 && !failureMode) {
      triggerInterstitial("Tu sembles concentr√©¬∑e sur la question. Vid√©o obligatoire.");
    }
  }

  function showCorrection(selectedIndex, showFeedback = true) {
    const q = questions[currentIndex];
    const buttons = answersContainer.querySelectorAll(".answer");
    buttons.forEach((btn, i) => {
      btn.classList.remove("correct", "wrong");
      if (i === q.correctIndex) btn.classList.add("correct");
      if (i === selectedIndex && i !== q.correctIndex) btn.classList.add("wrong");
    });

    const isCorrect = selectedIndex === q.correctIndex;
    if (showFeedback) {
      feedbackEl.classList.add("visible");
      feedbackEl.classList.toggle("wrong", !isCorrect);
      feedbackEl.innerHTML =
        "<strong>" +
        (isCorrect
          ? "Bonne compr√©hension de la mati√®re !"
          : "Ce n‚Äôest pas tout √† fait √ßa‚Ä¶") +
        "</strong> " +
        " " +
        q.explanation;
    }

    correctionsShown[currentIndex] = true;
    validateBtn.disabled = true;
  }

  function computeWrongChain() {
    let chain = 0;
    for (let i = userAnswers.length - 1; i >= 0; i--) {
      if (userAnswers[i] === null) break;
      if (userAnswers[i] !== questions[i].correctIndex) {
        chain++;
      } else {
        break;
      }
    }
    return chain;
  }

  function validateAnswer() {
    const selectedIndex = userAnswers[currentIndex];
    if (selectedIndex === null) return;

    const q = questions[currentIndex];
    const wasAlreadyCorrect =
      correctionsShown[currentIndex] &&
      selectedIndex === q.correctIndex;

    if (!correctionsShown[currentIndex]) {
      if (selectedIndex === q.correctIndex && !wasAlreadyCorrect) {
        score++;
        xp += 10;
        streak++;
      } else {
        streak = 0;
        toxic = Math.min(100, toxic + 8);
        const wrongChain = computeWrongChain();
        if (wrongChain >= 3 || failureMode) {
          triggerInterstitial(
            "Plusieurs r√©ponses incorrectes d‚Äôaffil√©e‚Ä¶ pause vid√©o punitive."
          );
        }
      }
    }

    showCorrection(selectedIndex, true);
    updateHeaders();

    if (currentIndex === questions.length - 1) {
      setTimeout(showResults, 600);
    } else {
      nextBtn.style.display = "inline-flex";
    }

    if (Math.random() < (failureMode ? 0.4 : 0.1)) {
      triggerInterstitial("Validation d‚Äôune r√©ponse sans interruption ? Impossible.");
    }
  }

  function goNext() {
    if (currentIndex < questions.length - 1) {
      currentIndex++;
      renderQuestion();
      if (Math.random() < (failureMode ? 0.25 : 0.06)) {
        triggerInterstitial("Changer de question m√©rite une petite vid√©o.");
      }
    } else {
      showResults();
    }
  }

  function goPrev() {
    if (currentIndex > 0) {
      currentIndex--;
      renderQuestion();
    }
  }

  function showResults() {
    score = userAnswers.reduce((acc, ans, i) => {
      if (ans === questions[i].correctIndex) return acc + 1;
      return acc;
    }, 0);

    const total = questions.length;
    const percent = Math.round((score / total) * 100);
    finalScoreText.textContent =
      score + " / " + total + " bonnes r√©ponses (" + percent + " %)";

    let comment;
    if (percent === 100) {
      comment =
        "Ma√Ætrise compl√®te de la mati√®re : tu distingues tr√®s bien discours, dispositifs et acteurs.";
    } else if (percent >= 75) {
      comment =
        "Tr√®s bon niveau : revois quelques d√©tails sur les r√©formes et le r√¥le des diff√©rents acteurs.";
    } else if (percent >= 50) {
      comment =
        "Base correcte : retravaille la logique des sanctions, le r√¥le des CPAS et des mutualit√©s.";
    } else {
      comment =
        "√Ä retravailler : relis la synth√®se en te concentrant sur les politiques de contr√¥le et les critiques.";
    }

    commentBadge.textContent = comment;
    detailBadge.textContent =
      "Distraction : " +
      distractionScore +
      " pts ¬∑ Toxicit√© : " +
      toxic +
      "%";

    resultScreen.style.display = "block";

    triggerInterstitial(
      "Fin du test : moment id√©al pour un interstitiel final."
    );
  }

  function restartQuiz() {
    currentIndex = 0;
    score = 0;
    xp = 0;
    toxic = failureMode ? 100 : 0;
    streak = 0;
    userAnswers = new Array(questions.length).fill(null);
    correctionsShown = new Array(questions.length).fill(false);
    resultScreen.style.display = "none";
    renderQuestion();
  }

  function addDistraction(points) {
    distractionScore += points;
    toxic = Math.min(100, toxic + Math.floor(points / 2));
    updateHeaders();
  }

  // --- Interstitiels YouTube ---
  const interstitialVideos = [
    "https://www.youtube.com/embed/Tyd0FO0tko8?autoplay=1",
    "https://www.youtube.com/embed/7QfN6q_YguI?autoplay=1",
    "https://www.youtube.com/embed/a8fHgx9mE5U?autoplay=1"
  ];

  function triggerInterstitial(reason) {
    interstitialReason.textContent = "Raison : " + reason;
    const url =
      interstitialVideos[Math.floor(Math.random() * interstitialVideos.length)];
    interstitialVideo.src = url;
    interstitial.style.display = "flex";
    addDistraction(5);
  }

  function closeInterstitialFn() {
    interstitial.style.display = "none";
    interstitialVideo.src = "";
  }

  // --- Tabs sidebar ---
  tabs.forEach((tab) => {
    tab.addEventListener("click", () => {
      const paneId = tab.dataset.pane;
      tabs.forEach((t) => t.classList.remove("active"));
      panes.forEach((p) => p.classList.remove("active"));
      tab.classList.add("active");
      document.getElementById(paneId).classList.add("active");
      addDistraction(2);
      if (Math.random() < (failureMode ? 0.25 : 0.06)) {
        triggerInterstitial("Tu explores les distractions : voici une vid√©o bonus.");
      }
    });
  });

  // --- Pingouins cliquables ---
  if (penguinGrid) {
    penguinGrid.querySelectorAll("img").forEach((img) => {
      img.addEventListener("click", () => {
        addDistraction(3);
        penguinClickCombo++;
        if (penguinClickCombo >= 5) {
          xp += 42;
          alert("Easter egg : +42 XP illusoires gagn√©s gr√¢ce aux pingouins.");
          penguinClickCombo = 0;
          updateHeaders();
        }
      });
    });
  }

  floatingPenguins.forEach((img) => {
    let count = 0;
    img.addEventListener("click", () => {
      count++;
      addDistraction(1);
      if (count === 5) {
        alert("Easter egg : tu as cliqu√© 5 fois sur un pingouin discret.");
      }
    });
  });

  // --- Bandeau d‚Äôalerte cliquable ---
  alertMarquee.addEventListener("click", () => {
    addDistraction(2);
    if (Math.random() < (failureMode ? 0.4 : 0.15)) {
      triggerInterstitial("Tu as cliqu√© sur le bandeau. Distraction m√©rit√©e.");
    }
  });

  // --- Konami code -> mode √©chec garanti ---
  document.addEventListener("keydown", (e) => {
    konamiBuffer.push(e.code);
    if (konamiBuffer.length > konamiCode.length) {
      konamiBuffer.shift();
    }
    if (konamiBuffer.join(",") === konamiCode.join(",")) {
      activateFailureMode();
    }
  });

  function activateFailureMode() {
    failureMode = true;
    toxic = 100;
    updateHeaders();
    alert(
      "Mode \"√©chec garanti\" activ√© : toxicit√© maximale, interstitiels fr√©quents, distractions encourag√©es."
    );
  }

  // --- Ouverture/fermeture du panneau de distractions ---
  function openDistractionsPanel() {
    backdrop.classList.add("open");
    addDistraction(3);
  }

  function closeDistractionsPanel() {
    backdrop.classList.remove("open");
  }

  openDistractionsBtn.addEventListener("click", openDistractionsPanel);
  closeDistractionsBtn.addEventListener("click", closeDistractionsPanel);
  backdrop.addEventListener("click", (e) => {
    if (e.target === backdrop) closeDistractionsPanel();
  });

  // --- √âv√©nements boutons quiz ---
  validateBtn.addEventListener("click", validateAnswer);
  nextBtn.addEventListener("click", goNext);
  prevBtn.addEventListener("click", goPrev);
  restartBtn.addEventListener("click", restartQuiz);

  closeInterstitial.addEventListener("click", closeInterstitialFn);
  interstitial.addEventListener("click", (e) => {
    if (e.target === interstitial) closeInterstitialFn();
  });

  // Interstitiel automatique apr√®s un d√©lai (si distractions ouvertes ou non)
  setTimeout(() => {
    if (!failureMode) {
      triggerInterstitial(
        "Tu es rest√©¬∑e plus de 30 secondes : exemple concret de rupture d‚Äôattention."
      );
    }
  }, 30000);

  // --- Initialisation ---
  renderQuestion();
</script>
</body>
</html>
