<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Portail de Tests · Orga</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-main: #050513;
      --bg-panel: #101022;
      --bg-panel-alt: #15152b;
      --border-soft: rgba(255,255,255,0.08);
      --text-main: #f5f5ff;
      --text-muted: #a8a8d5;
      --neon-green: #3dffb5;
      --neon-purple: #c46bff;
      --neon-pink: #ff4b9f;
      --neon-blue: #57c1ff;
      --radius-lg: 16px;
      --radius-md: 10px;
      --shadow-deep: 0 28px 60px rgba(0,0,0,0.95);
      --shadow-soft: 0 16px 30px rgba(0,0,0,0.7);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
    }

    body {
      font-family: "Space Grotesk", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top, #232347 0, #050513 60%),
        radial-gradient(circle at bottom, #1a1027 0, #050513 55%);
      color: var(--text-main);
      -webkit-font-smoothing: antialiased;
      display: flex;
      justify-content: center;
      align-items: stretch;
      padding: 1rem;
    }

    .grain {
      position: fixed;
      inset: 0;
      pointer-events: none;
      opacity: 0.25;
      background-image:
        repeating-linear-gradient(0deg, rgba(255,255,255,.06) 0, rgba(255,255,255,.06) 1px, transparent 1px, transparent 3px),
        repeating-linear-gradient(90deg, rgba(0,0,0,.5) 0, rgba(0,0,0,.5) 1px, transparent 1px, transparent 3px);
      mix-blend-mode: soft-light;
      z-index: 0;
    }

    .frame {
      position: relative;
      z-index: 1;
      max-width: 1180px;
      width: 100%;
      min-height: 88vh;
      background: radial-gradient(circle at top left, rgba(255,255,255,0.06), rgba(0,0,0,0.9));
      border-radius: var(--radius-lg);
      border: 1px solid rgba(255,255,255,0.14);
      box-shadow:
        0 0 0 1px rgba(0,0,0,0.85),
        var(--shadow-deep);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      backdrop-filter: blur(12px);
    }

    header {
      padding: 0.9rem 1.2rem 0.7rem;
      border-bottom: 1px solid var(--border-soft);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.7rem;
    }

    .title-block {
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
    }

    h1 {
      font-size: 1.15rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-weight: 600;
      color: var(--neon-green);
      text-shadow: 0 0 16px rgba(61,255,181,0.8);
    }

    .subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .tagline {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--neon-purple);
    }

    .mode-pill {
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.28);
      padding: 0.35rem 0.9rem;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
      background: radial-gradient(circle at top, rgba(255,255,255,0.06), rgba(0,0,0,0.95));
      box-shadow: 0 0 24px rgba(0,0,0,0.9);
    }

    .mode-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--neon-pink);
      box-shadow: 0 0 16px rgba(255,75,159,0.9);
    }

    main {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.5fr);
      gap: 0.75rem;
      padding: 0.75rem;
      flex: 1;
    }

    @media (max-width: 900px) {
      main {
        grid-template-columns: minmax(0, 1fr);
        grid-auto-rows: auto;
      }
    }

    /* Colonne gauche : liste des tests */
    .left-panel {
      background: linear-gradient(135deg, rgba(7,7,32,0.98), rgba(12,12,48,0.98));
      border-radius: var(--radius-md);
      border: 1px solid var(--border-soft);
      box-shadow: var(--shadow-soft);
      padding: 0.75rem;
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
      min-height: 0;
    }

    .left-headline {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 0.5rem;
    }

    .left-title {
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      opacity: 0.9;
    }

    .left-tag {
      font-size: 0.7rem;
      padding: 0.05rem 0.45rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.3);
      color: var(--text-muted);
    }

    .left-intro {
      font-size: 0.78rem;
      color: var(--text-muted);
      line-height: 1.5;
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.3rem;
    }

    .filter-pill {
      font-size: 0.7rem;
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.2);
      color: var(--text-muted);
      cursor: pointer;
      background: radial-gradient(circle at top, rgba(255,255,255,0.08), rgba(0,0,0,0.9));
      transition: all 0.12s ease-out;
    }

    .filter-pill.active {
      color: var(--neon-green);
      border-color: rgba(61,255,181,0.8);
      box-shadow: 0 0 14px rgba(61,255,181,0.7);
      text-shadow: 0 0 12px rgba(61,255,181,0.8);
    }

    .tests-list {
      margin-top: 0.5rem;
      overflow-y: auto;
      padding-right: 0.15rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      min-height: 0;
    }

    .test-card {
      border-radius: 10px;
      background: radial-gradient(circle at top left, rgba(255,255,255,0.04), rgba(0,0,0,0.9));
      border: 1px solid rgba(255,255,255,0.09);
      padding: 0.7rem 0.7rem 0.65rem;
      font-size: 0.8rem;
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
      position: relative;
      overflow: hidden;
    }

    .test-card::before {
      content: "";
      position: absolute;
      top: -40%;
      right: -40%;
      width: 140px;
      height: 140px;
      background: conic-gradient(
        from 220deg,
        rgba(61,255,181,0.0),
        rgba(61,255,181,0.12),
        rgba(196,107,255,0.15),
        rgba(255,75,159,0.0)
      );
      opacity: 0.6;
      filter: blur(12px);
      pointer-events: none;
    }

    .test-title {
      font-size: 0.86rem;
      font-weight: 600;
      margin-right: 1.2rem;
    }

    .test-meta {
      font-size: 0.7rem;
      display: flex;
      align-items: center;
      gap: 0.35rem;
      color: var(--text-muted);
    }

    .meta-badge {
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.24);
      padding: 0.1rem 0.5rem;
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .test-desc {
      font-size: 0.76rem;
      color: var(--text-muted);
      line-height: 1.5;
    }

    .test-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.15rem;
    }

    /* Boutons néons */
    .btn-neon {
      --neon-color: var(--neon-green);
      font-family: "JetBrains Mono", monospace;
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.3);
      padding: 0.35rem 0.9rem;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      background: radial-gradient(circle at top, rgba(255,255,255,0.1), rgba(0,0,0,0.98));
      color: var(--text-main);
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      transition: transform 0.08s ease-out, box-shadow 0.12s ease-out, border-color 0.1s ease-out, background 0.1s ease-out;
    }

    .btn-neon::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle, rgba(255,255,255,0.3), transparent 55%);
      opacity: 0;
      transform: translateY(60%);
      transition: opacity 0.18s ease-out, transform 0.18s ease-out;
    }

    .btn-neon span.bullet {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: var(--neon-color);
      box-shadow: 0 0 12px var(--neon-color);
      flex-shrink: 0;
    }

    .btn-neon[data-variant="fullscreen"]       { --neon-color: var(--neon-green); }
    .btn-neon[data-variant="modal"]            { --neon-color: var(--neon-purple); }
    .btn-neon[data-variant="newtab"]           { --neon-color: var(--neon-blue); }

    .btn-neon:hover {
      transform: translateY(-1px);
      border-color: rgba(255,255,255,0.6);
      box-shadow:
        0 0 24px rgba(61,255,181,0.55),
        0 12px 26px rgba(0,0,0,0.9);
      background: radial-gradient(circle at top, rgba(255,255,255,0.2), rgba(0,0,0,0.98));
    }

    .btn-neon:hover::before {
      opacity: 1;
      transform: translateY(0);
    }

    .btn-neon:active {
      transform: translateY(0);
      box-shadow:
        0 0 16px rgba(61,255,181,0.4),
        0 6px 18px rgba(0,0,0,0.95);
    }

    /* Colonne droite : écran central */
    .right-panel {
      background: linear-gradient(145deg, rgba(7,10,34,0.98), rgba(8,20,48,0.98));
      border-radius: var(--radius-md);
      border: 1px solid var(--border-soft);
      box-shadow: var(--shadow-soft);
      padding: 0.75rem;
      display: flex;
      flex-direction: column;
      gap: 0.55rem;
      min-height: 0;
    }

    .right-headline {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 0.5rem;
    }

    .right-title {
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      opacity: 0.9;
    }

    .right-info {
      font-size: 0.7rem;
      color: var(--text-muted);
      text-align: right;
    }

    .viewer-wrapper {
      flex: 1;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.14);
      background: radial-gradient(circle at top, rgba(21,26,70,0.9), rgba(3,4,20,0.98));
      box-shadow: 0 20px 40px rgba(0,0,0,0.9);
      overflow: hidden;
      position: relative;
      min-height: 260px;
    }

    .viewer-placeholder {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 1.5rem 1.2rem;
      gap: 0.5rem;
      pointer-events: none;
    }

    .viewer-placeholder h2 {
      font-size: 0.95rem;
      margin-bottom: 0.2rem;
    }

    .viewer-placeholder p {
      font-size: 0.8rem;
      color: var(--text-muted);
      max-width: 360px;
    }

    .viewer-placeholder .hint {
      font-size: 0.72rem;
      color: var(--neon-purple);
    }

    iframe#central-viewer {
      width: 100%;
      height: 100%;
      border: none;
      display: none;
      background: #02030b;
    }

    .viewer-meta {
      font-size: 0.73rem;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      gap: 0.5rem;
      margin-top: 0.25rem;
    }

    @media (max-width: 600px) {
      header {
        flex-direction: column;
        align-items: flex-start;
      }
      .right-info {
        text-align: left;
      }
      body {
        padding: 0.6rem;
      }
      .frame {
        min-height: 92vh;
      }
      .viewer-wrapper {
        min-height: 220px;
      }
    }

    /* Modal */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10;
      padding: 0.75rem;
    }

    .modal-backdrop.active {
      display: flex;
    }

    .modal-dialog {
      position: relative;
      width: 100%;
      max-width: 900px;
      height: min(80vh, 540px);
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.35);
      background: radial-gradient(circle at top, rgba(15,20,60,0.98), rgba(4,5,18,0.98));
      box-shadow: 0 28px 70px rgba(0,0,0,0.95);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .modal-header {
      padding: 0.55rem 0.8rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(255,255,255,0.2);
      font-size: 0.8rem;
    }

    .modal-title {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      opacity: 0.9;
    }

    .modal-close {
      cursor: pointer;
      font-size: 0.8rem;
      background: none;
      border: none;
      color: var(--text-main);
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.25rem 0.55rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.35);
      font-family: "JetBrains Mono", monospace;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .modal-close:hover {
      background: rgba(255,255,255,0.08);
    }

    .modal-body {
      flex: 1;
      position: relative;
      background: #02030b;
    }

    iframe#modal-viewer {
      width: 100%;
      height: 100%;
      border: none;
      background: #02030b;
    }

    footer {
      border-top: 1px solid var(--border-soft);
      padding: 0.45rem 1.1rem 0.6rem;
      font-size: 0.7rem;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      gap: 0.5rem;
    }

    @media (max-width: 600px) {
      footer {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
<div class="grain"></div>

<div class="frame">
  <header>
    <div class="title-block">
      <h1>Portail de tests & scénarios</h1>
      <div class="subtitle">
        Accès centralisé à tes pages, jeux, tests et expériences — lecture plein écran, en modale ou dans un nouvel onglet.
      </div>
      <div class="tagline">
        Organisation · Recrutement déviant · Polar noir & néons
      </div>
    </div>
    <div class="mode-pill">
      <span class="mode-dot"></span>
      Mode : Portail · Mobile first
    </div>
  </header>

  <main>
    <!-- Colonne gauche : catalogue -->
    <section class="left-panel">
      <div class="left-headline">
        <div class="left-title">Catalogue des tests</div>
        <div class="left-tag">Vue centrale · V1</div>
      </div>
      <p class="left-intro">
        Choisis un scénario ou une page de test ci-dessous. Chaque entrée peut être ouverte :
        <strong>dans l’écran central</strong>, <strong>dans une modale</strong> ou <strong>dans un nouvel onglet</strong>.
      </p>

      <div class="filters">
        <button class="filter-pill active" data-filter="all">Tous</button>
        <button class="filter-pill" data-filter="polar">Polar / Jeux</button>
        <button class="filter-pill" data-filter="recrutement">Recrutement</button>
        <button class="filter-pill" data-filter="crypto">Crypto & systèmes</button>
        <button class="filter-pill" data-filter="dossiers">Dossiers / Docs</button>
        <button class="filter-pill" data-filter="404">404 & Chaos</button>
      </div>

      <div class="tests-list" id="tests-list">
        <!-- Exemples de cartes (tu peux dupliquer/changer les URLs) -->

        <article class="test-card" data-category="polar" data-url="jeu-polar-1980.html">
          <div class="test-title">Polar noir · Petit boulot dans le Vlan</div>
          <div class="test-meta">
            <span class="meta-badge">Jeu narratif</span>
            <span>Belgique années 80 · tri de dossiers</span>
          </div>
          <p class="test-desc">
            Une petite annonce anodine dans le Vlan se transforme en programme de recrutement d’espion
            ultra secret. Tri de fichiers, proto-Internet, GitHub en guise de pouvoir central.
          </p>
          <div class="test-actions">
            <button class="btn-neon" data-variant="fullscreen" data-action="fullscreen">
              <span class="bullet"></span>Plein écran
            </button>
            <button class="btn-neon" data-variant="modal" data-action="modal">
              <span class="bullet"></span>Modale
            </button>
            <a class="btn-neon" data-variant="newtab" data-action="newtab" href="jeu-polar-1980.html" target="_blank" rel="noopener">
              <span class="bullet"></span>Nouvel onglet
            </a>
          </div>
        </article>

        <article class="test-card" data-category="polar" data-url="12-50.html">
          <div class="test-title">Jeu concours « 12,50 »</div>
          <div class="test-meta">
            <span class="meta-badge">Challenge</span>
            <span>Créer le site statique le plus « wow »</span>
          </div>
          <p class="test-desc">
            Un concours mystérieux où l’on doit créer un site pur HTML/CSS/JS maximaliste, ambiance
            Matrix, avec des cheatcodes cachés et une inscription payante à découvrir.
          </p>
          <div class="test-actions">
            <button class="btn-neon" data-variant="fullscreen" data-action="fullscreen">
              <span class="bullet"></span>Plein écran
            </button>
            <button class="btn-neon" data-variant="modal" data-action="modal">
              <span class="bullet"></span>Modale
            </button>
            <a class="btn-neon" data-variant="newtab" data-action="newtab" href="12-50.html" target="_blank" rel="noopener">
              <span class="bullet"></span>Nouvel onglet
            </a>
          </div>
        </article>

        <article class="test-card" data-category="recrutement" data-url="orga-recrutement.html">
          <div class="test-title">Recrutement pour l’Organisation</div>
          <div class="test-meta">
            <span class="meta-badge">Recrutement</span>
            <span>Tests, disclaimers & aiguillage des profils</span>
          </div>
          <p class="test-desc">
            Page de recrutement très sérieuse/ironique pour rejoindre l’Orga, avec test d’entrée,
            avertissements, réserves de recrutement et honesty disclaimer intégral.
          </p>
          <div class="test-actions">
            <button class="btn-neon" data-variant="fullscreen" data-action="fullscreen">
              <span class="bullet"></span>Plein écran
            </button>
            <button class="btn-neon" data-variant="modal" data-action="modal">
              <span class="bullet"></span>Modale
            </button>
            <a class="btn-neon" data-variant="newtab" data-action="newtab" href="orga-recrutement.html" target="_blank" rel="noopener">
              <span class="bullet"></span>Nouvel onglet
            </a>
          </div>
        </article>

        <article class="test-card" data-category="crypto" data-url="crypto-associative.html">
          <div class="test-title">Système de crypto associative</div>
          <div class="test-meta">
            <span class="meta-badge">Économie critique</span>
            <span>Monnaie symbolique pour associations</span>
          </div>
          <p class="test-desc">
            Un site qui explique, pas à pas, comment imaginer une « crypto » papier / points pour
            contribuer au secteur associatif, avec mises en garde et analyse critique.
          </p>
          <div class="test-actions">
            <button class="btn-neon" data-variant="fullscreen" data-action="fullscreen">
              <span class="bullet"></span>Plein écran
            </button>
            <button class="btn-neon" data-variant="modal" data-action="modal">
              <span class="bullet"></span>Modale
            </button>
            <a class="btn-neon" data-variant="newtab" data-action="newtab" href="crypto-associative.html" target="_blank" rel="noopener">
              <span class="bullet"></span>Nouvel onglet
            </a>
          </div>
        </article>

        <article class="test-card" data-category="dossiers" data-url="phase1-dossiers.html">
          <div class="test-title">Phase 1 · Dossiers documentaires</div>
          <div class="test-meta">
            <span class="meta-badge">Docs & Quiz</span>
            <span>Tests combinés à partir d’annexes</span>
          </div>
          <p class="test-desc">
            Portail intermédiaire qui donne accès aux pages test de révision de dossiers (PDF, YouTube,
            Spotify, quiz…) pour s’entraîner à la veille citoyenne.
          </p>
          <div class="test-actions">
            <button class="btn-neon" data-variant="fullscreen" data-action="fullscreen">
              <span class="bullet"></span>Plein écran
            </button>
            <button class="btn-neon" data-variant="modal" data-action="modal">
              <span class="bullet"></span>Modale
            </button>
            <a class="btn-neon" data-variant="newtab" data-action="newtab" href="phase1-dossiers.html" target="_blank" rel="noopener">
              <span class="bullet"></span>Nouvel onglet
            </a>
          </div>
        </article>

        <article class="test-card" data-category="404" data-url="404-chmod-777.html">
          <div class="test-title">404 · Alerte CHMOD 777</div>
          <div class="test-meta">
            <span class="meta-badge">Avertissement</span>
            <span>Fake ransomware & pédagogie sécurité</span>
          </div>
          <p class="test-desc">
            Page 404 qui fait flipper, simule un ransomware et explique en détail pourquoi
            le CHMOD 777 est une très mauvaise idée, avec un twist ludique.
          </p>
          <div class="test-actions">
            <button class="btn-neon" data-variant="fullscreen" data-action="fullscreen">
              <span class="bullet"></span>Plein écran
            </button>
            <button class="btn-neon" data-variant="modal" data-action="modal">
              <span class="bullet"></span>Modale
            </button>
            <a class="btn-neon" data-variant="newtab" data-action="newtab" href="404-chmod-777.html" target="_blank" rel="noopener">
              <span class="bullet"></span>Nouvel onglet
            </a>
          </div>
        </article>

        <!-- Tu peux rajouter autant de cartes que tu veux en dupliquant ce bloc -->
      </div>
    </section>

    <!-- Colonne droite : écran central -->
    <section class="right-panel">
      <div class="right-headline">
        <div class="right-title">Écran central de lecture</div>
        <div class="right-info" id="viewer-info">
          Aucun test chargé — choisis une carte à gauche et clique sur « Plein écran ».
        </div>
      </div>

      <div class="viewer-wrapper">
        <div class="viewer-placeholder" id="viewer-placeholder">
          <h2>Bienvenue dans le hub de l’Orga</h2>
          <p>
            Utilise la colonne de gauche pour parcourir les scénarios et tests. Tu peux les afficher
            ici, en modale ou les ouvrir dans un nouvel onglet.
          </p>
          <p class="hint">
            Astuce : sur mobile, les boutons néons restent gros et cliquables — le portail est pensé
            pour les agents qui travaillent sur petit écran.
          </p>
        </div>
        <iframe id="central-viewer" title="Écran central de test"></iframe>
      </div>

      <div class="viewer-meta" id="viewer-meta">
        <span>Mode affichage : aucun</span>
        <span>URL active : —</span>
      </div>
    </section>
  </main>

  <footer>
    <span>
      Ce portail centralise tes expérimentations HTML/CSS/JS : jeux noirs, crypto associative,
      recrutement tordu, pages 404 pédagogiques et autres curiosités.
    </span>
    <span>
      Pour ajouter un test : duplique une carte, adapte le titre, la description et surtout l’URL.
      L’Orga adore quand tout est rangé au même endroit.
    </span>
  </footer>
</div>

<!-- Modale pour la lecture -->
<div class="modal-backdrop" id="modal-backdrop">
  <div class="modal-dialog">
    <div class="modal-header">
      <div class="modal-title" id="modal-title">Lecture en modale</div>
      <button class="modal-close" type="button" id="modal-close">
        ✕ Fermer
      </button>
    </div>
    <div class="modal-body">
      <iframe id="modal-viewer" title="Visionneuse modale"></iframe>
    </div>
  </div>
</div>

<script>
  // Gestion des filtres
  const filterButtons = document.querySelectorAll(".filter-pill");
  const testCards = document.querySelectorAll(".test-card");

  filterButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      const filter = btn.dataset.filter;
      filterButtons.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");

      testCards.forEach(card => {
        const category = card.dataset.category;
        if (filter === "all" || category === filter) {
          card.style.display = "";
        } else {
          card.style.display = "none";
        }
      });
    });
  });

  // Écran central
  const viewer = document.getElementById("central-viewer");
  const viewerPlaceholder = document.getElementById("viewer-placeholder");
  const viewerInfo = document.getElementById("viewer-info");
  const viewerMeta = document.getElementById("viewer-meta");

  function loadInCentral(url, label) {
    if (!url) return;
    viewer.src = url;
    viewer.style.display = "block";
    viewerPlaceholder.style.display = "none";
    viewerInfo.textContent = `Test chargé : ${label}`;
    viewerMeta.innerHTML = `<span>Mode affichage : plein écran (dans le portail)</span><span>URL active : ${url}</span>`;
  }

  // Modale
  const modalBackdrop = document.getElementById("modal-backdrop");
  const modalViewer = document.getElementById("modal-viewer");
  const modalTitle = document.getElementById("modal-title");
  const modalClose = document.getElementById("modal-close");

  function openModal(url, label) {
    if (!url) return;
    modalViewer.src = url;
    modalTitle.textContent = `Lecture en modale · ${label}`;
    modalBackdrop.classList.add("active");
  }

  function closeModal() {
    modalBackdrop.classList.remove("active");
    modalViewer.src = "";
  }

  modalClose.addEventListener("click", closeModal);
  modalBackdrop.addEventListener("click", (e) => {
    if (e.target === modalBackdrop) closeModal();
  });

  // Boutons d’action sur chaque carte
  testCards.forEach(card => {
    const url = card.dataset.url;
    const label = card.querySelector(".test-title")?.textContent.trim() || "Test";

    card.querySelectorAll("[data-action]").forEach(btn => {
      const action = btn.dataset.action;

      if (action === "fullscreen") {
        btn.addEventListener("click", () => loadInCentral(url, label));
      }

      if (action === "modal") {
        btn.addEventListener("click", () => openModal(url, label));
      }

      // "newtab" est un <a> avec href déjà défini — rien à faire ici
    });
  });
</script>
</body>
</html>
